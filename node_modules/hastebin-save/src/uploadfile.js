const https = require('https');
const fs = require('fs')
const config = require('./../config.json')

module.exports = function(file, callbackFunction){
    var req = https.request({
        headers: {
            "Content-Type": "application/json; charset=utf-8"
        },
        host: config.host,
        port: config.port,
        path: config.path,
        method: "POST"
    }, clb => {
        var data = "";
        clb.on('data', buffer => {
            data += buffer;
        });
        clb.on("end", () => {callbackFunction(JSON.parse(data).key)});
    });
    req.write(fs.readFileSync(file).toString());
    req.end();
}